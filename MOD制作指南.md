# 同人Mod制作指南

## 简介

本游戏支持玩家创建自己的同人剧本mod。通过mod系统，你可以：
- 创建自定义故事剧情
- 使用自定义角色、背景和音乐
- 分享你的创意作品给其他玩家

## Mod文件夹结构

所有mod应放置在游戏数据目录下的 `mods` 文件夹中。每个mod是一个独立的子文件夹。

```
AppData/Roaming/Godot/app_userdata/[游戏名]/mods/
└── your_mod_name/                 # 你的mod文件夹名（建议使用英文）
    ├── icon.png                   # mod图标（必需，推荐尺寸：207x178像素）
    ├── mod_config.json            # mod配置文件（必需）
    ├── story/                     # 故事场景文件夹（必需）
    │   ├── ep01.tscn             # 第1集场景文件
    │   ├── ep01.gd               # 第1集脚本文件（可选）
    │   ├── ep02.tscn             # 第2集场景文件
    │   └── ...
    ├── characters/                # 自定义角色文件夹（可选）
    │   ├── custom_character_01.tscn
    │   ├── custom_character_01.gd
    │   └── ...
    ├── music/                     # 自定义音乐文件夹（可选）
    │   ├── bgm_01.mp3
    │   ├── bgm_02.mp3
    │   └── ...
    └── images/                    # 自定义图片文件夹（可选）
        ├── bg/                   # 背景图片
        │   ├── bg_01.png
        │   └── ...
        └── role/                 # 角色立绘
            ├── role_01.png
            └── ...
```

## 必需文件

### 1. icon.png
- **说明**: mod在游戏中显示的图标
- **格式**: PNG
- **推荐尺寸**: 207x178像素
- **注意**: 图标会按比例缩放，建议使用清晰的图片

### 2. mod_config.json
- **说明**: mod的配置文件，定义mod的基本信息和故事结构
- **格式**: JSON
- **模板**: 请参考根目录下的 `mod_config_template.json`

#### 配置文件字段说明：

```json
{
  "mod_id": "unique_mod_id",        // mod的唯一标识符（必需）
  "title": "mod标题",                // 在游戏中显示的mod名称（必需）
  "author": "作者名",                // mod作者（必需）
  "version": "1.0.0",               // mod版本号（必需）
  "description": "mod描述",          // mod的简短描述（必需）
  "episodes": {                     // 故事集列表（必需）
    "第1节": "story/ep01.tscn",     // 集名: 场景文件路径
    "第2节": "story/ep02.tscn",
    "第3节": "story/ep03.tscn"
  },
  "custom_characters": [            // 自定义角色列表（可选）
    "characters/character_01.tscn"
  ],
  "custom_music": {                 // 自定义音乐列表（可选）
    "bgm_01": "music/bgm_01.mp3"
  },
  "custom_images": {                // 自定义图片列表（可选）
    "backgrounds": [
      "images/bg/bg_01.png"
    ],
    "roles": [
      "images/role/role_01.png"
    ]
  },
  "created_date": "2025-12-30",    // 创建日期（可选）
  "last_updated": "2025-12-30"     // 最后更新日期（可选）
}
```

### 3. story/ 文件夹
- **说明**: 存放故事场景文件
- **格式**: Godot场景文件(.tscn)
- **注意**:
  - 场景文件路径必须与mod_config.json中的episodes配置对应
  - 建议参考游戏原有的故事场景结构
  - 可以包含对应的脚本文件(.gd)

## 可选文件夹

### characters/ - 自定义角色
- 存放自定义角色的场景和脚本文件
- 格式: .tscn和.gd文件
- 建议参考游戏原有的角色结构进行创建

### music/ - 自定义音乐
- 存放自定义背景音乐和音效
- 支持格式: .mp3, .ogg, .wav
- 建议使用合适的音量和循环设置

### images/ - 自定义图片
- **bg/**: 存放背景图片
- **role/**: 存放角色立绘
- 支持格式: .png, .jpg
- 建议使用高质量图片以获得更好的视觉效果

## 创建步骤

1. **创建mod文件夹**
   - 在 `mods` 文件夹下创建你的mod文件夹
   - 文件夹名建议使用英文，避免特殊字符

2. **准备icon.png**
   - 创建或准备一张图标图片
   - 调整大小为推荐尺寸
   - 保存为 `icon.png` 放在mod根目录

3. **编写mod_config.json**
   - 复制 `mod_config_template.json` 模板
   - 根据你的mod修改配置内容
   - 确保JSON格式正确（可使用在线JSON验证工具）

4. **创建故事场景**
   - 在 `story/` 文件夹中创建场景文件
   - 参考游戏原有场景结构
   - 确保场景路径与配置文件一致

5. **添加自定义资源**（可选）
   - 根据需要添加角色、音乐、图片等资源
   - 在配置文件中正确引用这些资源

6. **测试mod**
   - 启动游戏
   - 进入主菜单，点击"同人"按钮
   - 检查你的mod是否正确显示和运行

## 注意事项

1. **文件路径**
   - 所有路径都是相对于mod文件夹的相对路径
   - 使用 `/` 作为路径分隔符
   - 路径区分大小写

2. **JSON格式**
   - 确保JSON文件格式正确
   - 字符串必须使用双引号
   - 最后一个项目后不要有逗号

3. **资源文件**
   - 确保所有引用的文件都存在
   - 文件名不要包含特殊字符
   - 建议使用英文文件名

4. **兼容性**
   - mod使用的场景和脚本应与游戏版本兼容
   - 参考游戏原有资源的结构和格式
   - 测试mod在游戏中的表现

5. **mod设计**
   - 每个mod只包含一个章节的内容
   - 如果要制作多章节内容，请创建多个mod
   - 建议每个mod的故事内容相对独立

## 示例mod

游戏根目录下的 `mod_config_template.json` 提供了一个完整的配置示例。

你也可以参考其他玩家分享的mod来学习如何创建自己的mod。

## 分享mod

如果你创建了精彩的mod，欢迎分享给其他玩家！

分享时请：
1. 打包整个mod文件夹为zip文件
2. 提供清晰的安装说明
3. 说明mod的内容和特色
4. 注明适用的游戏版本

## 技术支持

如果在创建mod过程中遇到问题，可以：
- 检查游戏日志文件，查看错误信息
- 参考游戏原有的场景和脚本结构
- 在社区论坛寻求帮助

## 更新日志

- 2025-12-30: 初始版本，支持基础mod功能

---

祝你创作愉快！
